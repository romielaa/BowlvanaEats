<!--
    Bowlvana E-commerce Website
    CIT2011 Web Programming - Group Assignment #1
    
    Group Members:
    - Romiela Cooke (2209989) - Founder & CEO
    - Delano Wright (2210185) - Head Chef & Designer
    - Tareke Williams (23010976) - Sales Representative
    - Joshua Williams (23010988) - Lead Developer
    
    File: order_history.html
    Purpose: Order history page displaying user purchase history, statistics,
            and invoice management with detailed transaction records and 
            printable invoice functionality
    
    Created: November 2024
    Last Modified: November 2024
    
    Class: Wednesday 3:30 PM - 5:30 PM
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History - Your Choice - The Bowlvana Way!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <!-- External Resources -->
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
        <link href="styles.css" rel="stylesheet">
        <script src="cart.js"></script>
        
        <!-- Favicon Settings -->
        <link rel="icon" type="image/png" sizes="32x32" href="assets/images/logo1.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/images/logo1.png">
        <link rel="apple-touch-icon" sizes="180x180" href="assets/images/logo1.png">
    </head>
    <body>
        <!-- Header Navigation -->
        <header class="header">
            <a href="index.html" class="logo">
                <img src="assets/images/logo1.png" alt="Bowlvana Logo">
                <h2>Bowlvana</h2>
            </a>
            <nav class="nav-links">
                <a href="index.html">Home</a>
                <a href="menu.html">Menu</a>
                <a href="aboutus.html">About Us</a>
                <a href="registration.html">Registration</a>
                <a href="account.html" class="account-link">
                    <i class="fas fa-user"></i>
                </a>
            </nav>
        </header>
    
        <!-- Add back button and spacing -->
        <div style="height: 80px;"></div> 
        <div style="padding: 20px; background-color: white;">
            <a href="index.html" style="
                display: inline-block;
                padding: 12px 24px;
                background: linear-gradient(135deg, #8A2BE2, #4169E1);
                color: white;
                text-decoration: none;
                border-radius: 8px;
                font-weight: 600;
                transition: all 0.3s ease;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            ">
                <i class="fas fa-arrow-left" style="margin-right: 8px;"></i>
                Back to Home
            </a>
        </div>

    <style>
:root {
    --royal-acai: #8A2BE2;
    --ocean-breeze: #4169E1;
    --glass-bg: rgba(255, 255, 255, 0.9);
    --glass-border: rgba(255, 255, 255, 0.2);
    --dark-text: #333;
    --light-text: #666;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Playfair Display', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
    min-height: 100vh;
}

/* Header Navigation Styles */
.header {
    background: linear-gradient(135deg, var(--royal-acai), var(--ocean-breeze));
    padding: 1rem 2rem;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.page-header {
    margin-top: 0;
    background: var(--royal-acai);  /* Solid color instead of gradient */
    color: white;
    padding: 2rem;
    text-align: center;
    position: relative;
    margin-bottom: 3rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Logo Styles */
.logo {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: white;
    gap: 1.2rem;
    transition: transform 0.3s ease;
}

.logo:hover {
    transform: scale(1.02);
}

.logo img {
    height: 45px;
    width: auto;
}

.logo h2 {
    font-family: 'Bodoni Moda', serif;
    font-size: 2.2rem;
    margin: 0;
    color: white;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

/* Navigation Links */
.nav-links {
    display: flex;
    align-items: center;
    gap: 3rem;
}

.nav-links a {
    color: white;
    text-decoration: none;
    font-size: 1.1rem;
    font-weight: 600;
    position: relative;
    padding-bottom: 5px;
    transition: color 0.3s ease;
}

/* Simplified hover effect */
.nav-links a:hover {
    color: rgba(255, 255, 255, 0.8);
}

/* Account and Cart Links */
.account-link,
.cart-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: white;
    text-decoration: none;
    transition: all 0.3s ease;
}

.account-link:hover,
.cart-link:hover {
    transform: translateY(-2px);
}


        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, var(--royal-acai), var(--ocean-breeze));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            margin-bottom: 3rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .page-header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
        }

        .page-header p {
            margin: 0.5rem 0 0;
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* Order History Container */
        .order-history-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        /* Order Stats Section */
        .order-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--glass-bg);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2em;
            color: var(--royal-acai);
            margin-bottom: 0.5rem;
        }

        .stat-card .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--dark-text);
        }

        .stat-card .stat-label {
            color: var(--light-text);
            font-size: 0.9em;
            margin-top: 0.5rem;
        }

        /* Order Cards Section */
        .orders-section {
            background: var(--glass-bg);
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid rgba(138, 43, 226, 0.1);
}

        .section-header h2 {
            margin: 0;
            color: var(--dark-text);
            font-size: 1.5em;
        }

        .order-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            animation: slideUp 0.5s ease forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .order-header h3 {
            margin: 0;
            color: var(--dark-text);
            font-size: 1.2em;
        }

        .order-date {
            color: var(--light-text);
            font-size: 0.9em;
        }

        .order-items {
            margin: 1rem 0;
        }

        .order-item {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(138, 43, 226, 0.1);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        /* No Orders State */
        .no-orders {
            text-align: center;
            padding: 3rem;
            background: white;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .no-orders i {
            font-size: 3em;
            color: var(--royal-acai);
            margin-bottom: 1rem;
        }

        .no-orders h3 {
            color: var(--dark-text);
            margin: 0 0 0.5rem;
        }

        .no-orders p {
            color: var(--light-text);
            margin: 0;
        }
 /* Global Variables */
.invoice-section {
            display: none;
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            animation: slideUp 0.5s ease forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .invoice-section.show {
            display: block;
        }

        .invoice-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(138, 43, 226, 0.1);
            margin-bottom: 20px;
        }

        .invoice-company-details {
            text-align: center;
            margin-bottom: 20px;
            color: #000000;
        }

        .invoice-company-details h2 {
            color: var(--royal-acai);
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .invoice-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(138, 43, 226, 0.05);
            border-radius: 15px;
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 0.9em;
            color: #000000;
            margin-bottom: 5px;
        }

        .meta-value {
            font-weight: 600;
            color: var(--dark-text);
        }

        .invoice-items-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-bottom: 30px;
        }

        .invoice-items-table th {
            background: linear-gradient(135deg, var(--royal-acai), var(--ocean-breeze));
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 500;
        }

        .invoice-items-table th:first-child { border-top-left-radius: 10px; }
        .invoice-items-table th:last-child { border-top-right-radius: 10px; }

        .invoice-items-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.1);
        }

        .invoice-totals {
            background: rgba(138, 43, 226, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .invoice-total-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
        }

        .invoice-total-row.final {
            font-weight: 600;
            color: var(--royal-acai);
            border-top: 2px solid rgba(138, 43, 226, 0.1);
            margin-top: 10px;
            padding-top: 10px;
        }

        .invoice-footer {
            text-align: center;
            color: #000000;
            padding-top: 20px;
            border-top: 2px solid rgba(138, 43, 226, 0.1);
        }

        .invoice-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .invoice-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
        }

        .print-btn {
            background: linear-gradient(135deg, var(--royal-acai), var(--ocean-breeze));
        }

        .print-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.2);
        }

        @media print {
            .page-header,
            .back-button,
            .order-card,
            .invoice-actions {
                display: none;
            }

            .invoice-section {
                display: block;
                box-shadow: none;
                border: none;
                padding: 0;
            }
        }

        /* Add a view invoice button to order cards */
        .view-invoice-btn {
            margin-top: 20px;
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--royal-acai), var(--ocean-breeze));
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .view-invoice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.2);
        }
        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .order-history-container {
                padding: 0 1rem;
            }

            .stat-card {
                padding: 1rem;
            }

            .orders-section {
                padding: 1rem;
            }

            .order-card {
                padding: 1rem;
            }
        }
        .trn-info {
    display: inline-block;
    padding: 4px 8px;
    background: rgba(138, 43, 226, 0.1);
    color: #8A2BE2;
    border-radius: 4px;
    font-size: 0.9em;
    margin-bottom: 1rem;
}

.order-details {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin: 1rem 0;
}
    </style>
</head>
<body>
    <!-- Page Header -->
    <header class="page-header">
        <h1>Order History</h1>
        <p>Track your culinary journey with Bowlvana</p>
    </header>

    <div class="order-history-container">
        <!-- Order Statistics -->
        <section class="order-stats" id="orderStats">
            <!-- Will be populated by JavaScript -->
        </section>
                <!-- Orders Section -->
                <section class="orders-section">
                    <div class="section-header">
                        <h2>Your Orders</h2>
                        <div class="section-actions">

                        </div>
                    </div>
                    
                    <div id="ordersList">
                        <!-- Orders will be populated here -->
                    </div>
                </section>

        <!-- Invoice Section -->
        <section id="invoiceSection" class="invoice-section">
            <!-- Invoice will be populated here -->
        </section>
    </div>

    <script>
// Generate random order number
function generateOrderId() {
    const prefix = 'BV';
    const timestamp = Date.now().toString().slice(-6);
    const characters = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    let random = '';
    for(let i = 0; i < 4; i++) {
        random += characters.charAt(Math.floor(Math.random() * characters.length));
    }
    return `${prefix}${timestamp}${random}`;
}
// Function to generate a unique invoice number
function generateInvoiceNumber() {
    const prefix = 'INV';
    const timestamp = Date.now().toString().slice(-6);
    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
    return `${prefix}-${timestamp}-${random}`;
}

// Function to generate and store invoice with real data
function generateInvoice(orderDetails) {
    // Basic validation
    if (!orderDetails || !orderDetails.items || !orderDetails.orderId) {
        console.error('Invalid order details provided');
        return null;
    }

    const companyDetails = {
        name: "Bowlvana",
        address: "Southern Cross, Fairview Montego Bay",
        phone: "+1 (876) 344-9461",
        trn: "123-456-789"
    };

    // Calculate totals from actual order data
    const subtotal = orderDetails.items.reduce((sum, item) => {
        return sum + (item.price * item.quantity);
    }, 0);

    const taxRate = 0.15;
    const tax = subtotal * taxRate;
    const total = subtotal + tax;

    // Create invoice with real order data
    const invoice = {
        invoiceNumber: generateInvoiceNumber(),
        orderNumber: orderDetails.orderId,
        dateIssued: new Date().toISOString(),
        companyDetails: companyDetails,
        customerInfo: {
            name: orderDetails.customerName || 'Guest',
            email: orderDetails.email || 'Not provided',
            phone: orderDetails.phone || 'Not provided',
            deliveryArea: orderDetails.deliveryArea || 'Not specified',
            deliveryAddress: orderDetails.deliveryAddress || 'Not provided'
        },
        items: orderDetails.items.map(item => ({
            name: item.name,
            quantity: item.quantity,
            price: item.price,
            total: item.price * item.quantity
        })),
        calculations: {
            subtotal: subtotal.toFixed(2),
            tax: tax.toFixed(2),
            total: total.toFixed(2)
        },
        paymentMethod: orderDetails.paymentMethod || 'Not specified',
        status: "Paid",
        notes: "Thank you for choosing Bowlvana! Your satisfaction is our priority."
    };

    // Store in localStorage with real data
    const allInvoices = JSON.parse(localStorage.getItem('AllInvoices')) || [];
    allInvoices.push(invoice);
    localStorage.setItem('AllInvoices', JSON.stringify(allInvoices));

    return invoice;
}

// Display orders from actual localStorage data
function displayOrders() {
    const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const ordersContainer = document.getElementById('ordersList');

    if (orders.length === 0) {
        ordersContainer.innerHTML = `
            <div class="no-orders">
                <i class="fas fa-receipt"></i>
                <h3>No Orders Yet</h3>
                <p>Your culinary journey will be displayed here once you make your first order.</p>
            </div>
        `;
        return;
    }

    ordersContainer.innerHTML = orders.map((order, index) => `
        <div class="order-card" style="animation-delay: ${index * 0.1}s">
            <div class="order-header">
                <h3>Order #${order.orderId}</h3>
                <span class="order-date">${new Date(order.date).toLocaleDateString()}</span>
            </div>
            <div class="order-details">
                <span class="trn-info">${order.trn ? `TRN: ${order.trn}` : 'Guest Order'}</span>
                <div class="order-items">
                    ${order.items.map(item => `
                        <div class="order-item">
                            <span>${item.name}</span>
                            <span>x${item.quantity}</span>
                            <span>J$${item.price.toFixed(2)}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
            <button onclick="viewInvoice('${order.orderId}')" class="view-invoice-btn">
                <i class="fas fa-file-invoice"></i>
                View Invoice
            </button>
        </div>
    `).join('');
}

// Update order statistics from real data
function updateOrderStats() {
    const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const statsContainer = document.getElementById('orderStats');
    
    // Calculate real stats from actual orders
    const totalOrders = orders.length;
    const totalSpent = orders.reduce((sum, order) => {
        return sum + order.items.reduce((total, item) => 
            total + (item.price * item.quantity), 0);
    }, 0);
    
    const averageOrder = totalOrders ? (totalSpent / totalOrders) : 0;
    const lastOrderDate = totalOrders ? 
        new Date(orders[orders.length - 1].date).toLocaleDateString() : 
        'No orders yet';

    statsContainer.innerHTML = `
        <div class="stat-card">
            <i class="fas fa-shopping-bag"></i>
            <div class="stat-value">${totalOrders}</div>
            <div class="stat-label">Total Orders</div>
        </div>
        <div class="stat-card">
            <i class="fas fa-dollar-sign"></i>
            <div class="stat-value">J$${totalSpent.toFixed(2)}</div>
            <div class="stat-label">Total Spent</div>
        </div>
        <div class="stat-card">
            <i class="fas fa-chart-line"></i>
            <div class="stat-value">J$${averageOrder.toFixed(2)}</div>
            <div class="stat-label">Average Order</div>
        </div>
        <div class="stat-card">
            <i class="fas fa-clock"></i>
            <div class="stat-value">${lastOrderDate}</div>
            <div class="stat-label">Last Order</div>
        </div>
    `;
}

// View invoice for actual orders
function viewInvoice(orderId) {
    const allInvoices = JSON.parse(localStorage.getItem('AllInvoices')) || [];
    const invoice = allInvoices.find(inv => inv.orderNumber === orderId);
    
    if (invoice) {
        displayInvoice(invoice);
    } else {
        const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
        const order = orders.find(ord => ord.orderId === orderId);
        if (order) {
            const newInvoice = generateInvoice(order);
            displayInvoice(newInvoice);
        } else {
            alert('Invoice not found');
        }
    }
}

// Initialize the page with real data
document.addEventListener('DOMContentLoaded', function() {
    updateOrderStats();
    displayOrders();
});

function viewInvoice(orderId) {
    const allInvoices = JSON.parse(localStorage.getItem('AllInvoices')) || [];
    const invoice = allInvoices.find(inv => inv.orderNumber === orderId);
    
    if (invoice) {
        displayInvoice(invoice);
    } else {
        // If invoice not found, generate it from order
        const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
        const order = orders.find(ord => ord.orderId === orderId);
        if (order) {
            const newInvoice = generateInvoice(order);
            displayInvoice(newInvoice);
        } else {
            alert('Invoice not found');
        }
    }
}

function displayInvoice(invoice) {
    const invoiceSection = document.getElementById('invoiceSection');
    
    // Get the order history and find matching order by ID
    const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const matchingOrder = orders.find(order => order.orderId === invoice.orderNumber);
    
    // Get TRN from the matching order
    const trn = matchingOrder ? matchingOrder.trn : '';
    
    invoiceSection.innerHTML = `
        <div class="invoice-company-details">
            <h2>Bowlvana</h2>
            <p>Southern Cross, Fairview Montego Bay, Jamaica</p>
            <p>Phone: +1 (876) 344-9461</p>
        </div>

        <div class="invoice-meta">
            <div class="meta-item">
                <span class="meta-label">Invoice Number</span>
                <span class="meta-value">${invoice.invoiceNumber}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Customer TRN</span>
                <span class="meta-value">${trn}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Order Number</span>
                <span class="meta-value">${invoice.orderNumber}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Delivery Area</span>
                <span class="meta-value">${invoice.customerInfo.deliveryArea}</span>
            </div>
        </div>

        <table class="invoice-items-table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Price (J$)</th>
                    <th>Total (J$)</th>
                </tr>
            </thead>
            <tbody>
                ${invoice.items.map(item => `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.quantity}</td>
                        <td>${item.price.toFixed(2)}</td>
                        <td>${(item.price * item.quantity).toFixed(2)}</td>
                    </tr>
                `).join('')}
            </tbody>
        </table>

        <div class="invoice-totals">
            <div class="invoice-total-row">
                <span>Subtotal</span>
                <span>J$${invoice.calculations.subtotal}</span>
            </div>
            <div class="invoice-total-row">
                <span>Tax (15%)</span>
                <span>J$${invoice.calculations.tax}</span>
            </div>
            <div class="invoice-total-row final">
                <span>Total</span>
                <span>J$${invoice.calculations.total}</span>
            </div>
        </div>

        <div class="invoice-footer">
            <p>Payment Method: ${invoice.paymentMethod}</p>
            <p>Status: ${invoice.status}</p>
        </div>

        <div class="invoice-actions">
            <button onclick="window.print()" class="invoice-btn print-btn">
                <i class="fas fa-print"></i>
                Print Invoice
            </button>
        </div>
    `;

    invoiceSection.classList.add('show');
    invoiceSection.scrollIntoView({ behavior: 'smooth' });
}

        function updateOrderStats() {
            const orders = JSON.parse(localStorage.getItem('orderHistory')) || [];
            const statsContainer = document.getElementById('orderStats');
            
            // Calculate stats
            const totalOrders = orders.length;
            const totalSpent = orders.reduce((sum, order) => {
                const orderTotal = order.items.reduce((total, item) => 
                    total + (item.price * item.quantity), 0);
                return sum + orderTotal;
            }, 0);
            
            const averageOrder = totalOrders ? (totalSpent / totalOrders) : 0;
            const lastOrderDate = totalOrders ? new Date(orders[0].date || Date.now()).toLocaleDateString() : 'No orders yet';

            statsContainer.innerHTML = `
                <div class="stat-card">
                    <i class="fas fa-shopping-bag"></i>
                    <div class="stat-value">${totalOrders}</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-dollar-sign"></i>
                    <div class="stat-value">J$${totalSpent.toFixed(2)}</div>
                    <div class="stat-label">Total Spent</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-chart-line"></i>
                    <div class="stat-value">J$${averageOrder.toFixed(2)}</div>
                    <div class="stat-label">Average Order</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock"></i>
                    <div class="stat-value">${lastOrderDate}</div>
                    <div class="stat-label">Last Order</div>
                </div>
            `;
        }
    </script>
</body>
</html>  